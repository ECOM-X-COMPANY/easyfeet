{% comment %} Do not edit this file {% endcomment %}
{% raw %}
  {% assign root_url = {% endraw %}"{%- if routes.root_url != "/" -%}{{ routes.root_url }}{%- endif -%}"{% raw %} %}
  {% assign currencyFormat = {% endraw %}{{ shop.money_format | json }}{% raw %} %}
  {% assign swatch_options = 'Colour~~Color' | downcase | split: "~~" | uniq  %}
  {% assign image_options  = '' | downcase | split: "~~" | uniq  %}
  {% assign text_options   = 'Size' | downcase | split: "~~" | uniq  %}
  {% assign show_selected_variant_info = true %}
 
  {% assign image_size     = '360x504' %}
  {% assign images_count   = product.images | size %}
  {% assign variants_count = product.variants | size %}
  {% assign options_count  = product.options | size %}
  {% assign no_image = 'https://cdn.shopify.com/s/images/themes/product-1.png' %}

  {% assign featured_image            = product.featured_image %}
  {% assign product_price             = product.price %}
  {% assign product_compare_at_price  = product.compare_at_price %}
  {% assign second_image_index        = 2 %}
  {% assign selected_or_first_available_variant = product.selected_or_first_available_variant %}
  {% assign variant_url = '' %}
  {% if product.selected_or_first_available_variant %}{% assign variant_url = '?variant=' | append: product.selected_or_first_available_variant.id %}{% endif %}  {% if show_selected_variant_info and product.selected_variant %}
    {% assign selected_or_first_available_variant = product.selected_variant %}
    {% assign product_price             = selected_or_first_available_variant.price %}
    {% assign product_compare_at_price  = selected_or_first_available_variant.compare_at_price %}
    {% if selected_or_first_available_variant.image %}
      {% assign featured_image = selected_or_first_available_variant.image %}
    {% endif %}
  {% endif %}

  {% for image in product.images %}
    {% if image.id == featured_image.id %}
      {% if forloop.index == images_count %}
        {% assign second_image_index = 1 %}
      {% else %}
        {% assign second_image_index = forloop.index | plus: 1 %}
      {% endif %}
    {% endif %}
  {% endfor %}

           {%- liquid
  if collection and settings.card_url_within_coll and product.collections contains collection
    assign product_url = product.url | within: collection
  else
    assign product_url = product.url
  endif

  if product_url contains "?"
    assign product_url = product_url | split: "?" | first
  endif

  assign current_variant = product.selected_or_first_available_variant
  assign product_images = product.media | where: 'media_type', 'image'

  if settings.card_show_hover_image and product_images.size > 1
    assign show_hover_image = true

    if product_images.size >= product.featured_media.position
      assign hover_image = product_images[product.featured_media.position]
    else
      assign hover_image = product_images[0]
    endif
  else
    assign show_hover_image = false
  endif

  if image_ratio == nil
    if settings.prod_card_image_ratio == 'shortest' or settings.prod_card_image_ratio == 'tallest'
      assign image_ratio = 1
    else
      assign image_ratio = settings.prod_card_image_ratio
    endif
  elsif image_ratio == 0 or image_ratio == 99
    assign image_ratio = 1
  endif

  if section.settings.card_size == 'small'
    assign swatch_limit = 4
  else
    assign swatch_limit = 7
  endif

  if product.featured_media

    if settings.prod_card_image_fit == 'contain'
      assign class = 'img-fit img-fit--contain card__main-image'
    else
      assign class = 'img-fit card__main-image ' | append: settings.prod_card_image_align
    endif

    if product.featured_media.preview_image == product_images.last
      assign show_hover_image = false
    endif
  endif

  assign image_quality = 1
  if product.featured_media.preview_image.aspect_ratio > 1 and settings.prod_card_image_ratio != "1.77" and settings.prod_card_image_fit == "cover"
    assign image_quality = 2
  endif

  assign product_not_for_sale = false
  if product.template_suffix contains 'coming-soon' or product.template_suffix contains 'countdown'
    assign product_not_for_sale = true
  endif

  assign card_class = ""
  if product.template_suffix contains 'preorder'
    assign card_class = " card--product-preorder"
  elsif product.template_suffix contains 'coming-soon'
    assign card_class = " card--product-coming-soon"
  elsif product.template_suffix contains 'countdown'
    assign card_class = " card--product-countdown"
  endif
-%}
<li class='js-pagination-result'>
{%- if product and product != empty -%}
  <product-card class="card card--product{{ card_class }} h-full{% if settings.card_contain %} card--product-contained{% endif %}{% unless settings.show_dividers %} card--no-lines{% endunless %} card--product-compare relative flex">

  
      <div class="card__compare no-js-hidden text-sm">
        <input type="checkbox" class="checkbox checkbox--compare js-compare-checkbox" id="compare-{{ product.id }}"
               data-product-id="{{ product.id }}" data-product-url="{{ product_url }}">
        <label for="compare-{{ product.id }}">{% endraw %}{{ 'products.compare.switch_label' | t }}{% raw %}</label>
      </div>
 

    <div class="card__media{% if show_hover_image %} has-hover-image{% endif %}{% if settings.blend_product_images %} image-blend{% endif %} relative">
    
 <a class="spf-product-card__image-wrapper{% if images_count > 1 %} hover-effect{% endif %}" href="{{root_url}}{{ product.url }}{{variant_url}}" style="padding-top:140%;">
        {% if images_count > 0 %}
          {% for image in product.images %}
            <img
              data-variants="{% if image.variant_ids %}{{image.variant_ids | join: ','}}{% endif %}"
              class="gflazyload spf-product-card__image spf-product-card__image-{% if featured_image.id == image.id %}main{% elsif forloop.index == second_image_index %}secondary{% else %}hidden{% endif %}"
              srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
              src="{{image.src | img_url: image_size}}"
              data-src="{{image.src | img_lazyload_url}}"
              data-sizes="auto"
              data-aspectratio="{{image.aspect_ratio}}"
              data-parent-fit="contain"
              alt="{{image.alt | escape}}"
              />
          {% endfor %}
        {% else %}
        <img data-variants="" class="gflazyload spf-product-card__image spf-product-card__image-main" src="{{no_image}}" alt="{{product.title | escape}}">
        {% endif %}
                
      </a>
          
    </div>

    <div class="card__info-container flex flex-col flex-auto relative">
      <div class="card__info w-full">
        <div class="card__info-inner{% if settings.card_price_bottom %} flex flex-col h-full{% else %} inline-block{% endif %} w-full">
          {%- if settings.card_show_vendor -%}
            <p class="card__vendor{% if settings.show_dividers %} mb-1{% else %} mb-0{% endif %} text-sm text-theme-light">
              {{- product.vendor -}}
            </p>
          {%- endif -%}

          <p class="card__title font-bold{% if settings.show_dividers %} mb-1{% else %} mt-1 mb-0{% endif %}">
            <a href="{{ product_url }}" class="card-link text-current js-prod-link">
              {{- product.title | escape -}}
            </a>
          </p>

          {%- if settings.card_show_subtitle and product.metafields.descriptors.subtitle != blank -%}
            <p class="text-sm text-current mb-1{% unless settings.show_dividers %} mt-1{% endunless %}">
              {{ product.metafields.descriptors.subtitle }}
            </p>
          {%- endif -%}

          <!-- rating -->
          <!-- end-rating -->

          {%- if settings.card_price_bottom == false -%}
           <div class="spf-product-card__price-wrapper">
        {% if product_compare_at_price > product_price %}
        <span class="spf-product-card__oldprice{% unless currencyFormat contains 'money' %} money{% endunless %}">{{ product_compare_at_price | money }}</span>
        <span class="spf-product-card__saleprice{% unless currencyFormat contains 'money' %} money{% endunless %}">{{ product_price | money }}</span>
        {% else %}
        <span class="spf-product-card__price{% unless currencyFormat contains 'money' %} money{% endunless %}">{{ product_price | money }}</span>
        {% endif %}
      </div>
         
          {%- endif -%}

          
          {%- if settings.card_show_inventory and current_variant.inventory_management != blank -%}
             {%- assign total = 0 -%}
             {%- assign inventory_policy = '' -%}
             {%- for variant in product.variants -%}
               {%- if variant.inventory_quantity > 0 -%}
                 {%- assign total = total | plus: variant.inventory_quantity -%}
               {%- endif -%}
               {%- if variant.inventory_policy == 'continue' -%}
                 {%- assign inventory_policy = 'continue' -%}
               {%- endif -%}
             {%- endfor -%}

             {%- if total <= 0 -%}
               {%- if inventory_policy == 'continue' -%}
                {%-  if settings.hide_no_stock_backordered -%}
                  {%-  assign inventory_level = 'hide' -%}
                 {%- else -%}
                    {%- assign inventory_level = 'backordered' -%}
                 {%- endif -%}
               {%- elsif product.available -%}
                 {%- assign inventory_level = 'in_stock' -%}
               {%- else -%}
                {%-  assign inventory_level = 'hide' -%}
              {%-  endif -%}
              {%- elsif total <= settings.inventory_threshold_very_low -%}
                {%- assign inventory_level = 'very_low' -%}
             {%- elsif total <= settings.inventory_threshold_low -%}
               {%- assign inventory_level = 'low' -%}
             {%- else -%}
               {%- assign inventory_level = 'normal' -%}
             {%- endif -%}

             {%- if inventory_level == "normal" or inventory_level == "in_stock" -%}
               {%- if settings.inventory_show_notice == "low" -%}
                 {%- assign inventory_level = 'hide' -%}
                {%- endif -%}
              {%- endif  -%}
           

            {%- unless inventory_level == 'hide' -%}
              <div class="{% if settings.show_dividers %}mt-3 border-top pt-3{% else %}pt-5{% endif %} text-xs product-inventory__status" data-inventory-level="{{ inventory_level }}">
                {%- if inventory_level == 'very_low' -%}
                 {% endraw %} {{ 'products.inventory.very_low_stock' | t }}{% raw %}
                  ({{ total }} units)
                {%- elsif inventory_level == 'low' -%}
                 {% endraw %} {{ 'products.inventory.low_stock' | t }} {% raw %}                    
                     ({{ total }} units)
                {%- elsif inventory_level == 'backordered' -%}
                 {% endraw %} {{ 'products.inventory.backordered' | t }}{% raw %}
                {%- else -%}
                 {% endraw %}  {{ 'products.inventory.in_stock' | t }} {% raw %}
                  ({{ total }} units)
                {%- endif -%}
              </div>
            {%- endunless -%}
          {%- endif -%}

          {%- if settings.card_price_bottom -%}
           <div class="spf-product-card__price-wrapper">
            {% if product_compare_at_price > product_price %}
            <span class="spf-product-card__oldprice{% unless currencyFormat contains 'money' %} money{% endunless %}">{{ product_compare_at_price | money }}</span>
            <span class="spf-product-card__saleprice{% unless currencyFormat contains 'money' %} money{% endunless %}">{{ product_price | money }}</span>
            {% else %}
            <span class="spf-product-card__price{% unless currencyFormat contains 'money' %} money{% endunless %}">{{ product_price | money }}</span>
            {% endif %}
          </div>
          {%- endif -%}
        </div>
      </div>

      {%- if settings.enable_quick_add and disable_quickbuy != true -%}
        <div class="card__quick-add
          {% if settings.card_atc_mobile == "text_button_bottom" %}mob:card__quick-add--below{% endif %}
          {% if settings.card_atc_mobile == "icon" %}mob:card__quick-add--icon{% endif %}
          {% if settings.card_atc_desktop == "text_button_bottom" %}desktop:card__quick-add--below{% endif %}
          {% if settings.card_atc_desktop == "icon" %}desktop:card__quick-add--icon{% endif %}
        ">
                   {%- assign product_form_id = 'quick-add-' | append: section_id | append: product.id -%}

         {% unless product.variants.size > 1 %} 
            <product-form>
              <div class="alert mb-8 bg-error-bg text-error-text js-form-error text-start" role="alert" hidden></div>
         <form method="post" action="/cart/add" id="{{ product_form_id }}" accept-charset="UTF-8" class="js-product-form" enctype="multipart/form-data" novalidate="novalidate">
                <input type="hidden" name="id" value="{{ current_variant.id }}" disabled>
                {%- capture button_text -%}
                  {%- if product.template_suffix contains 'preorder' -%}
                {% endraw %} {{- 'products.product.preorder' | t -}}  {% raw %} 
                  {%- else -%}
                     {% endraw %}  {{- 'products.product.add_to_cart' | t -}}  {% raw %} 
                  {%- endif -%}
                {%- endcapture -%}

                <button class="btn btn--primary w-full"
                        data-add-to-cart-text="{{- button_text | escape -}}"
                        name="add"
                        aria-haspopup="dialog"
                        {%- if current_variant.available == false %}disabled{% endif %}>
                  <span class="quick-add-btn-icon">
                    <span class="visually-hidden">{{- button_text -}}</span>
                   <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" focusable="false" role="presentation" class="icon"><path d="M12.12 20.44H5.6V9.56h12.8v3.73c.06.4.4.69.8.7.44 0 .8-.35.8-.8v-4.5a.792.792 0 0 0-.8-.69H17V6.5C16.9 4 14.7 2 12 2S7 4.09 7 6.67V8H4.71c-.4.04-.71.37-.71.78v12.53a.8.8 0 0 0 .8.69h7.43c.38-.06.67-.39.67-.78 0-.43-.35-.78-.78-.78ZM8.66 6.67c0-1.72 1.49-3.11 3.33-3.11s3.33 1.39 3.33 3.11V8H8.65V6.67Z"/><path d="M20 17.25h-2.4v-2.5a.817.817 0 0 0-.8-.7c-.44 0-.8.36-.8.8v2.4h-2.5c-.4.06-.7.4-.7.8 0 .44.36.8.8.8H16v2.5c.06.4.4.7.8.7.44 0 .8-.36.8-.8v-2.4h2.5c.4-.06.69-.4.7-.8 0-.44-.35-.8-.8-.8Z"/></svg>
                  </span>
                  <span class="quick-add-btn-text">
                    {{- button_text -}}
                  </span>
                </button>
                <a href="{{ product_url }}" class="btn btn--secondary quick-add-view-btn">
                 {% endraw %}  {{- 'products.product.view_details' | t -}} {% raw %}
                </a>
           </form>
            </product-form>
        {%- else -%}
            <div class="no-js-hidden">
              <button type="button"
                      class="btn btn--primary w-full js-quick-add"
                      aria-haspopup="dialog"
                      data-product-url="{{ product_url }}"
                      data-product-default-variant="{{ product.has_only_default_variant }}"
                      {% if selected_color %}data-selected-color="{{ selected_color }}"{% endif %}>
                <span class="quick-add-btn-icon block pointer-events-none">
                  <span class="visually-hidden">{% endraw %}{{- 'products.product.choose_options' | t -}}{% raw %}</span>
                 <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" focusable="false" role="presentation" class="icon"><path d="M12.12 20.44H5.6V9.56h12.8v3.73c.06.4.4.69.8.7.44 0 .8-.35.8-.8v-4.5a.792.792 0 0 0-.8-.69H17V6.5C16.9 4 14.7 2 12 2S7 4.09 7 6.67V8H4.71c-.4.04-.71.37-.71.78v12.53a.8.8 0 0 0 .8.69h7.43c.38-.06.67-.39.67-.78 0-.43-.35-.78-.78-.78ZM8.66 6.67c0-1.72 1.49-3.11 3.33-3.11s3.33 1.39 3.33 3.11V8H8.65V6.67Z"/><path d="M20 17.25h-2.4v-2.5a.817.817 0 0 0-.8-.7c-.44 0-.8.36-.8.8v2.4h-2.5c-.4.06-.7.4-.7.8 0 .44.36.8.8.8H16v2.5c.06.4.4.7.8.7.44 0 .8-.36.8-.8v-2.4h2.5c.4-.06.69-.4.7-.8 0-.44-.35-.8-.8-.8Z"/></svg>
                </span>
                <span class="quick-add-btn-text block pointer-events-none">
                 {% endraw %} {{- 'products.product.choose_options' | t -}}{% raw %}
                </span>
              </button>
              <a href="{{ product_url }}" class="btn btn--secondary quick-add-view-btn">
              {% endraw %}  {{- 'products.product.view_details' | t -}}{% raw %}
              </a>
            </div>
           {%- endunless -%}
        </div>
      {%- endif -%}
    </div>
  </product-card>
{%- else -%}
  <div class="card">
    <div class="card__media">
      <div class="media relative" style="padding-top: {{ 1 | divided_by: image_ratio | times: 100 }}%;">
        {%- capture placeholder_name -%}product-{{ 'now' | date: '%N' | modulo: 6 | plus: 1 }}{%- endcapture -%}
        {{ placeholder_name | placeholder_svg_tag: 'media__placeholder img-fit' }}
      </div>
    </div>
    <div class="card__info">
      <p class="card__title font-bold">{% endraw %}{{ 'onboarding.product.title' | t }}{% raw %}</p>
      <div class="card__price theme-money">
        <div class="spf-product-card__price-wrapper">
        {% if product_compare_at_price > product_price %}
        <span class="spf-product-card__oldprice{% unless currencyFormat contains 'money' %} money{% endunless %}">{{ product_compare_at_price | money }}</span>
        <span class="spf-product-card__saleprice{% unless currencyFormat contains 'money' %} money{% endunless %}">{{ product_price | money }}</span>
        {% else %}
        <span class="spf-product-card__price{% unless currencyFormat contains 'money' %} money{% endunless %}">{{ product_price | money }}</span>
        {% endif %}
      </div>
      </div>
    </div>
  </div>
{%- endif -%}
    
</li>
      {% endraw %}
